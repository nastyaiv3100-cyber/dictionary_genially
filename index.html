<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–∞—Ä—Ç–æ—á–µ–∫ v5.3 (Tall Preview)</title>
<style>
    body { font-family: 'Segoe UI', sans-serif; background: #eef2f5; padding: 20px; color: #333; margin: 0; }
    
    /* –®–∏—Ä–æ–∫–∏–π –º–∞–∫–µ—Ç */
    .main-layout { display: flex; gap: 30px; max-width: 98%; margin: 0 auto; align-items: flex-start; }
    
    .settings-panel { 
        background: white; padding: 25px; border-radius: 16px; 
        box-shadow: 0 4px 20px rgba(0,0,0,0.05); width: 350px; flex-shrink: 0; 
        max-height: 95vh; overflow-y: auto; position: sticky; top: 20px;
    }

    .preview-panel { flex-grow: 1; display: flex; flex-direction: column; gap: 20px; }

    h2 { margin-top: 0; color: #2c3e50; font-size: 1.2rem; }
    label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; color: #666; }
    input[type="color"] { width: 100%; height: 40px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; padding: 0; background: none; }
    
    input[type="range"] { width: 100%; margin: 10px 0; }
    .range-value { font-weight: bold; color: #2196F3; float: right; }

    .word-list { height: 400px; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; padding: 10px; background: #fafafa; margin-bottom: 15px; }
    .check-item { display: flex; align-items: center; padding: 6px 0; border-bottom: 1px solid #f0f0f0; }
    .check-item input { margin-right: 10px; transform: scale(1.2); cursor: pointer; }
    .check-item label { cursor: pointer; width: 100%; margin: 0; }

    button.generate-btn {
        background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        color: white; border: none; padding: 15px; 
        font-size: 16px; border-radius: 10px; cursor: pointer; width: 100%; 
        font-weight: bold; box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
    }
    button.generate-btn:hover { transform: translateY(-2px); }

    /* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞ —Ç–µ–ø–µ—Ä—å 850px + –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
    .preview-box {
        background: #fff; border-radius: 16px; padding: 0; 
        height: 850px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–æ–ª—å—à–∞—è –≤—ã—Å–æ—Ç–∞ */
        box-shadow: 0 4px 20px rgba(0,0,0,0.05); border: 2px dashed #ccc;
        overflow: hidden; 
        position: relative;
    }
    
    textarea { width: 100%; height: 120px; padding: 15px; border-radius: 12px; border: 2px solid #eee; font-family: monospace; font-size: 12px; resize: vertical; }
</style>
</head>
<body>

<div class="main-layout">
    <div class="settings-panel">
        <h2>üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∏ v5.3</h2>
        
        <label>–ú–∞—Å—à—Ç–∞–±: <span id="scaleVal" class="range-value">1.0</span></label>
        <input type="range" id="scaleInput" min="0.3" max="1.5" step="0.1" value="1.0" oninput="updatePreview()">
        
        <label>–¶–≤–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏:</label>
        <input type="color" id="cardColor" value="#FF9800" oninput="updatePreview()">
        <br>
        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞:</label>
        <input type="color" id="textColor" value="#FFFFFF" oninput="updatePreview()">

        <h3 style="margin: 15px 0 5px 0; font-size: 1rem; color: #444; border-bottom: 2px solid #eee;">–°–ª–æ–≤–∞—Ä—å</h3>
        <button onclick="toggleAll(true)" style="margin-bottom:5px; cursor:pointer;">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
        <button onclick="toggleAll(false)" style="margin-bottom:5px; cursor:pointer;">–°–±—Ä–æ—Å–∏—Ç—å</button>

        <div class="word-list" id="wordListContainer"></div>

        <button class="generate-btn" onclick="generateCode()">üì¶ –£–ø–∞–∫–æ–≤–∞—Ç—å –∫–æ–¥</button>
    </div>

    <div class="preview-panel">
        <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:</label>
        <div class="preview-box" id="previewArea"></div>
        
        <div style="background: white; padding: 20px; border-radius: 16px;">
            <h3 style="margin-top:0;">–ö–æ–¥ –¥–ª—è Genially</h3>
            <textarea id="resultCode" readonly onclick="this.select()"></textarea>
        </div>
    </div>
</div>

<script>
    const dictionaryDB = {
        "–±–∞–∫–ª—É—à–∏ –±–∏—Ç—å": "–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å, –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø—É—Å—Ç—è–∫–∞–º–∏.",
        "–±–µ–∑ –≥–æ–¥—É –Ω–µ–¥–µ–ª—è": "–°–æ–≤—Å–µ–º –Ω–µ–¥–∞–≤–Ω–æ, –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è.",
        "–±–µ–ª–∞—è –≤–æ—Ä–æ–Ω–∞": "–ß–µ–ª–æ–≤–µ–∫, —Ä–µ–∑–∫–æ –≤—ã–¥–µ–ª—è—é—â–∏–π—Å—è –∏–∑ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã.",
        "–±–ª–æ—Ö—É –ø–æ–¥–∫–æ–≤–∞—Ç—å": "–ò—Å–∫—É—Å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∞–º—É—é –∑–∞–º—ã—Å–ª–æ–≤–∞—Ç—É—é —Ä–∞–±–æ—Ç—É.",
        "–≤ –µ–∂–æ–≤—ã—Ö —Ä—É–∫–∞–≤–∏—Ü–∞—Ö": "–û—á–µ–Ω—å —Å—Ç—Ä–æ–≥–æ, —Å—É—Ä–æ–≤–æ.",
        "–≤ —á–∞—Å –ø–æ —á–∞–π–Ω–æ–π –ª–æ–∂–∫–µ": "–û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ.",
        "–≤–µ—à–∞—Ç—å –≥–æ–ª–æ–≤—É": "–£–Ω—ã–≤–∞—Ç—å.",
        "–≤–∏–ª–∞–º–∏ –ø–æ –≤–æ–¥–µ –ø–∏—Å–∞–Ω–æ": "–ò—Å—Ö–æ–¥ –Ω–µ —è—Å–µ–Ω, –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –∫–∞–∫ –±—É–¥–µ—Ç.",
        "–≤–∏—Ç–∞—Ç—å –≤ –æ–±–ª–∞–∫–∞—Ö": "–§–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞—Ç—å, –º–µ—á—Ç–∞—Ç—å.",
        "–≤–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å": "–û–±–º–∞–Ω—ã–≤–∞—Ç—å, –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ.",
        "–≤–æ–¥–æ–π –Ω–µ —Ä–∞–∑–ª–∏—Ç—å": "–û –∫—Ä–µ–ø–∫–æ–π –¥—Ä—É–∂–±–µ.",
        "–≤–æ–ª–æ—Å—ã –¥—ã–±–æ–º": "–û—á–µ–Ω—å —Å—Ç—Ä–∞—à–Ω–æ.",
        "–≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —á–∏—Å—Ç—É—é –≤–æ–¥—É": "–†–∞–∑–æ–±–ª–∞—á–∏—Ç—å, —É–ª–∏—á–∏—Ç—å –≤–æ –ª–∂–∏.",
        "–¥–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞": "–°–∏–ª—å–Ω–æ –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å.",
        "–¥–µ—Ä–∂–∞—Ç—å —è–∑—ã–∫ –∑–∞ –∑—É–±–∞–º–∏": "–ú–æ–ª—á–∞—Ç—å.",
        "–¥—É—à–∞ –≤ –ø—è—Ç–∫–∏": "–°–∏–ª—å–Ω—ã–π –∏—Å–ø—É–≥.",
        "–∑–∞—Ä—É–±–∏—Ç—å –Ω–∞ –Ω–æ—Å—É": "–ö—Ä–µ–ø–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞.",
        "–∫–∞–∫ –≤ –≤–æ–¥—É –≥–ª—è–¥–µ–ª": "–ü—Ä–µ–¥–≤–∏–¥–µ–ª —Å–æ–±—ã—Ç–∏—è.",
        "–∫–∞–∫ –¥–≤–µ –∫–∞–ø–ª–∏ –≤–æ–¥—ã": "–û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏.",
        "–∫–∞–∫ —Ä—ã–±–∞ –≤ –≤–æ–¥–µ": "–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–æ.",
        "–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞": "–í—Å—ë –Ω–∏–ø–æ—á–µ–º, –±–µ–∑—Ä–∞–∑–ª–∏—á–Ω–æ.",
        "–∫–ª–µ–≤–∞—Ç—å –Ω–æ—Å–æ–º": "–î—Ä–µ–º–∞—Ç—å.",
        "–∫–æ—Ç –Ω–∞–ø–ª–∞–∫–∞–ª": "–û—á–µ–Ω—å –º–∞–ª–æ.",
        "–∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª–µ–∑—ã": "–ü—Ä–∏—Ç–≤–æ—Ä–Ω–æ–µ —Å–æ–∂–∞–ª–µ–Ω–∏–µ.",
        "–º–µ–¥–≤–µ–¥—å –Ω–∞ —É—Ö–æ –Ω–∞—Å—Ç—É–ø–∏–ª": "–ù–µ—Ç –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ —Å–ª—É—Ö–∞.",
        "–º–æ—Ä–æ—á–∏—Ç—å –≥–æ–ª–æ–≤—É": "–°–±–∏–≤–∞—Ç—å —Å —Ç–æ–ª–∫—É.",
        "–Ω–∞ —Å–µ–¥—å–º–æ–º –Ω–µ–±–µ": "–í –ø–æ–ª–Ω–æ–º –≤–æ—Å—Ç–æ—Ä–≥–µ.",
        "–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ": "–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –Ω–µ—É—é—Ç–Ω–æ.",
        "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞": "–ü–æ–∂–µ–ª–∞–Ω–∏–µ —É–¥–∞—á–∏.",
        "–æ–±–≤–µ—Å—Ç–∏ –≤–æ–∫—Ä—É–≥ –ø–∞–ª—å—Ü–∞": "–õ–æ–≤–∫–æ –æ–±–º–∞–Ω—É—Ç—å.",
        "–ø–æ—Å–ª–µ –¥–æ–∂–¥–∏—á–∫–∞ –≤ —á–µ—Ç–≤–µ—Ä–≥": "–ù–∏–∫–æ–≥–¥–∞.",
        "—Å–µ–º—å –ø—è—Ç–Ω–∏—Ü –Ω–∞ –Ω–µ–¥–µ–ª–µ": "–û —á–µ–ª–æ–≤–µ–∫–µ, —á–∞—Å—Ç–æ –º–µ–Ω—è—é—â–µ–º —Ä–µ—à–µ–Ω–∏—è.",
        "—Å–µ—Å—Ç—å –≤ –∫–∞–ª–æ—à—É": "–û–∫–∞–∑–∞—Ç—å—Å—è –≤ —Å–º–µ—à–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏, –Ω–µ—É–¥–∞—á–∞.",
        "—Å–∏–¥–µ—Ç—å —Å–ª–æ–∂–∞ —Ä—É–∫–∏": "–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å.",
        "—Å–∫–≤–æ–∑—å –∑–µ–º–ª—é –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è": "–°–∏–ª—å–Ω–æ —Å—Ç—ã–¥–∏—Ç—å—Å—è.",
        "—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∫–≤–æ–∑—å –ø–∞–ª—å—Ü—ã": "–ù–µ –∑–∞–º–µ—á–∞—Ç—å –ø–ª–æ—Ö–æ–≥–æ.",
        "—Å–æ–±–∞–∫—É —Å—ä–µ–ª": "–ò–º–µ—Ç—å –±–æ–ª—å—à–æ–π –æ–ø—ã—Ç.",
        "—Å—á–∏—Ç–∞—Ç—å –≤–æ—Ä–æ–Ω": "–û—Ç–≤–ª–µ–∫–∞—Ç—å—Å—è.",
        "—Ç–∏—à–µ –≤–æ–¥—ã –Ω–∏–∂–µ —Ç—Ä–∞–≤—ã": "–ë—ã—Ç—å –Ω–µ–∑–∞–º–µ—Ç–Ω—ã–º.",
        "—Ç—è–Ω—É—Ç—å –∫–æ—Ç–∞ –∑–∞ —Ö–≤–æ—Å—Ç": "–ú–µ–¥–ª–∏—Ç—å.",
        "—É–º—ã–≤–∞—Ç—å —Ä—É–∫–∏": "–°–Ω–∏–º–∞—Ç—å —Å —Å–µ–±—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
        "—Ö–æ—Ç—å –≥–ª–∞–∑ –≤—ã–∫–æ–ª–∏": "–û—á–µ–Ω—å —Ç–µ–º–Ω–æ.",
        "—è–∑—ã–∫ –ø—Ä–æ–≥–ª–æ—Ç–∏—Ç—å": "–ó–∞–º–æ–ª—á–∞—Ç—å."
    };

    function initList() {
        const container = document.getElementById('wordListContainer');
        Object.keys(dictionaryDB).sort().forEach((key, i) => {
            const div = document.createElement('div');
            div.className = 'check-item';
            div.innerHTML = `<label><input type="checkbox" value="${key}" ${i<6?'checked':''} onchange="updatePreview()"> ${key}</label>`;
            container.appendChild(div);
        });
        updatePreview();
    }

    function toggleAll(state) {
        document.querySelectorAll('#wordListContainer input').forEach(cb => cb.checked = state);
        updatePreview();
    }

    function getInnerHtml(settings, items) {
        return `
        <!DOCTYPE html>
        <html>
        <head>
        <style>
            body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: transparent; width: 100vw; overflow-x: hidden; }
            .scaler {
                width: calc(100vw / ${settings.scale} - 30px); 
                transform: scale(${settings.scale});
                transform-origin: 0 0;
                display: flex; flex-wrap: wrap; gap: 15px; justify-content: center;
                padding: 10px; box-sizing: border-box;
            }
            .flip-card { background-color: transparent; width: 180px; height: 120px; perspective: 1000px; cursor: pointer; margin-bottom: 10px; }
            .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; box-shadow: 0 4px 8px rgba(0,0,0,0.15); border-radius: 12px; }
            .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
            .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 12px; display: flex; align-items: center; justify-content: center; padding: 10px; box-sizing: border-box; }
            .flip-card-front { background-color: ${settings.cardColor}; color: ${settings.textColor}; }
            .flip-card-front p { font-size: 1.1em; font-weight: bold; margin: 0; text-transform: uppercase; }
            .flip-card-back { background-color: white; color: #333; transform: rotateY(180deg); border: 3px solid ${settings.cardColor}; }
            .flip-card-back p { font-size: 0.9em; margin: 0; line-height: 1.3; }
        </style>
        </head>
        <body>
            <div class="scaler">
                ${items.map(item => `
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front"><p>${item.phrase}</p></div>
                            <div class="flip-card-back"><p>${item.def}</p></div>
                        </div>
                    </div>
                `).join('')}
            </div>
        </body>
        </html>`;
    }

    function updatePreview() {
        const settings = {
            cardColor: document.getElementById('cardColor').value,
            textColor: document.getElementById('textColor').value,
            scale: document.getElementById('scaleInput').value
        };
        document.getElementById('scaleVal').innerText = settings.scale;

        const items = Array.from(document.querySelectorAll('#wordListContainer input:checked')).map(cb => ({ phrase: cb.value, def: dictionaryDB[cb.value] }));
        
        const iframe = document.createElement('iframe');
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "none";
        iframe.style.background = "#fcfcfc";
        
        document.getElementById('previewArea').innerHTML = '';
        document.getElementById('previewArea').appendChild(iframe);
        
        const doc = iframe.contentWindow.document;
        doc.open();
        doc.write(getInnerHtml(settings, items));
        doc.close();
    }

    function generateCode() {
        const settings = {
            cardColor: document.getElementById('cardColor').value,
            textColor: document.getElementById('textColor').value,
            scale: document.getElementById('scaleInput').value
        };
        const items = Array.from(document.querySelectorAll('#wordListContainer input:checked')).map(cb => ({ phrase: cb.value, def: dictionaryDB[cb.value] }));

        if(items.length === 0) { alert("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–≤–∞!"); return; }

        let htmlContent = getInnerHtml(settings, items);
        let escapedHtml = htmlContent.replace(/"/g, '&quot;');

        const iframeCode = `<iframe 
    srcdoc="${escapedHtml}" 
    style="width: 100%; height: 100%; border: none; overflow: visible; background: transparent;"
    sandbox="allow-scripts allow-same-origin"
></iframe>`;

        const textarea = document.getElementById('resultCode');
        textarea.value = iframeCode;
        textarea.style.background = "#e3f2fd";
        setTimeout(() => textarea.style.background = "#fff", 500);
    }

    initList();
</script>

</body>
</html>
